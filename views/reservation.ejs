<%- include("header") %>

<div class="page_produit">
  <button class="btn_retour" onclick="history.back()">← Revenir à la liste des produits</button>

  <form class="card_reservation" action="/reservation" method="post">
    <div class="card_produit">
      <div class="image_zone">
        <img src="/public/img/produits/Prdt24.png" alt="Haltères 5 Kg">
        <button type="submit" class="btn_panier">Ajouter au panier</button>
      </div>

      <div class="info_zone">
        <h3>Haltères 5 Kg</h3>
        <p>dammmmmmmm la teammmmmmm shape beurk </p>

        <p class="prix_unitaire">59,99€ / u</p>

        <div class="quantite">
          <button type="button" id="moins">-</button>
          <span id="quantite">1</span>
          <button type="button" id="plus">+</button>
        </div>

        <p class="prix_total">Prix total : <span id="total">59,99</span>€</p>

        <input type="hidden" name="quantite" id="quantite_input" value="1">

        <h4>Dates de réservation</h4>
        <div class="calendar">
          <div class="calendar_header">
            <span class="month">OCTOBER</span>
          </div>
          <div class="calendar_body">
            <div class="date_selected">10</div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<%- include("footer") %>

<script>
  // --- Gestion quantité ---
  const prixUnitaire = 59.99;
  const quantiteEl = document.getElementById("quantite");
  const totalEl = document.getElementById("total");
  const btnMoins = document.getElementById("moins");
  const btnPlus = document.getElementById("plus");
  const inputQuantite = document.getElementById("quantite_input");

  let quantite = 1;

  function updateTotal() {
    quantiteEl.textContent = quantite;
    totalEl.textContent = (prixUnitaire * quantite).toFixed(2).replace('.', ',');
    inputQuantite.value = quantite;
  }

  btnPlus.addEventListener("click", () => {
    quantite++;
    updateTotal();
  });

  btnMoins.addEventListener("click", () => {
    if (quantite > 1) {
      quantite--;
      updateTotal();
    }
  });
</script>
