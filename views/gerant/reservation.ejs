<%- include("header") %>

<link rel="stylesheet" href="/CSS/reservation.css">
    <div class="calendar-container">
        <div class="calendar-header" id="monthLabel"></div>
        <div class="calendar-grid" id="calendarGrid"></div>
    </div>


    <%- include("../footer") %>
    <script>
        const monthLabel = document.getElementById("monthLabel");
        const grid = document.getElementById("calendarGrid");

        let currentYear = 2025;
        let currentMonth = 9; // octobre (0 = janvier)

        let startDate = null;
        let endDate = null;

        const dayNames = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];

        function renderCalendar() {
        grid.innerHTML = "";
        monthLabel.textContent = "OCTOBER";

        dayNames.forEach((d, i) => {
            const div = document.createElement("div");
            div.textContent = d;
            div.className = "day-name";
            if (i === 0){
                div.classList.add("sun")
            } ;
            if (i === 6){
                div.classList.add("sat")
            };
            grid.appendChild(div);
        });

        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
            grid.appendChild(document.createElement("div"));
        }

        for (let d = 1; d <= daysInMonth; d++) {
            const div = document.createElement("div");
            const date = new Date(currentYear, currentMonth, d);
            div.classList.add("day");
            div.textContent = d;

            if (date.getDay() === 6){
                div.classList.add("sun")
            } ;
            if (date.getDay() === 5){
                div.classList.add("sat")
            } ;

            if (startDate && d === startDate.getDate()){
                div.classList.add("selected-start")
            } ;
            if (endDate && d === endDate.getDate()){
                div.classList.add("selected-end")
            } ;

            if (startDate && endDate && date >= startDate && date <= endDate && d !== startDate.getDate() && d !== endDate.getDate()) {
                div.classList.add("in-range");
            }

            div.onclick = () => selectDate(date);
            grid.appendChild(div);
        }
        }

        function selectDate(date) {
        if (!startDate || (startDate && endDate)) {
            startDate = date;
            endDate = null;
        } else if (date > startDate) {
            endDate = date;
        } else {
            startDate = date;
            endDate = null;
        }
        renderCalendar();
        }

        renderCalendar();
    </script>
